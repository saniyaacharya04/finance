# Finance — SaaS-Style Stock Trading Simulation Platform

## Overview

**Finance** is a production-grade, SaaS-inspired stock trading simulation platform built with Flask.
It allows users to register, authenticate, fetch real-time stock quotes, simulate buying and selling stocks, track portfolio performance, and view complete transaction history — all while enforcing **freemium usage limits**, **clean architecture**, **tests**, and **CI**.

This project is intentionally designed to resemble a **real internal system used by a startup**, not a tutorial or toy app.

---

## Key Features

### Core (Free Tier — Fully Implemented)

* User authentication (register, login, logout)
* Real-time stock quotes via external API
* Portfolio dashboard with cash & holdings
* Buy and sell stocks with real validation
* Transaction history tracking
* Session-based state management
* Freemium enforcement (daily quote limits)
* Centralized error handling
* Deterministic unit and end-to-end tests

### Premium (Placeholder — SaaS-Ready)

* Unlimited quotes
* Billing upgrade endpoint
* Stripe-style billing hooks (stubbed)

All premium features are **explicitly locked** and return appropriate HTTP errors (`402 Payment Required`).

---

## Tech Stack

* **Backend**: Python, Flask
* **Session Management**: Flask-Session
* **Testing**: Pytest (unit + E2E)
* **CI/CD**: GitHub Actions
* **Architecture**: Layered (API, Services, Domain, Core)
* **Environment Management**: Conda / `.env`
* **Deployment Ready**: Docker support included

---

## Project Structure

```
finance/
├── docker/
│   ├── Dockerfile
│   └── docker-compose.yml
├── .github/
│   └── workflows/
│       └── ci.yml
├── src/
│   └── app/
│       ├── api/            # Route handlers (Flask blueprints)
│       ├── services/       # Business logic
│       ├── domain/         # Domain models & plans
│       ├── core/           # Config, security, filters, errors
│       ├── integrations/   # External APIs & billing stubs
│       ├── web/
│       │   ├── templates/  # Jinja templates
│       │   └── static/     # CSS, images
│       └── main.py         # App factory entrypoint
├── tests/
│   ├── unit/
│   ├── e2e/
│   └── conftest.py
├── .env.example
├── .gitignore
├── LICENSE
├── Makefile
├── requirements.txt
└── requirements.lock.txt
```

---

## Architecture Overview

The system follows a **layered architecture**:

* **API Layer**
  Handles HTTP requests, validation, and responses.

* **Service Layer**
  Encapsulates business logic (trading, portfolio management, usage tracking).

* **Domain Layer**
  Defines core concepts such as plans and limits.

* **Core Layer**
  Centralized configuration, authentication decorators, error handling, and filters.

* **Integrations Layer**
  External services (market data API, billing stubs).

This separation ensures:

* High testability
* Clear ownership of logic
* Easy future migration to a database or microservices

---

## Freemium & SaaS Design

* Free users are limited to a fixed number of stock quotes per day.
* Usage is tracked per session.
* When limits are exceeded, the system returns a clear upgrade message.
* Premium endpoints exist but are intentionally non-functional placeholders.

This mirrors **real SaaS enforcement patterns** used in production systems.

---

## Running Locally

### Prerequisites

* Python 3.10+
* Conda (recommended)

### Setup

```bash
conda create -n finance python=3.10
conda activate finance

pip install -r requirements.txt
cp .env.example .env
```

### Run the App

```bash
make run
```

The application will start at:

```
http://127.0.0.1:5000
```

---

## Running Tests

```bash
make test
```

Includes:

* Unit tests for trading logic
* End-to-end tests for user flows

---

## CI Pipeline

A GitHub Actions workflow runs automatically on every push and pull request:

* Installs dependencies
* Runs all tests
* Fails fast on regressions

This ensures the main branch is always in a deployable state.

---

## Error Handling & Security

* Login-required routes enforced via decorators
* Centralized HTTP error handlers
* No secrets committed to the repository
* Environment-based configuration

---

## Design Trade-Offs

* Sessions used instead of a database for simplicity and speed of iteration
* Billing logic stubbed intentionally to avoid fake implementations
* External market API used in read-only mode

All trade-offs are explicitly documented and easy to evolve.

---

## Future Improvements

* Replace session storage with Redis or PostgreSQL
* Real payment processing via Stripe
* Role-based access control
* Rate limiting middleware
* Production WSGI server configuration

---

## License

This project is licensed under the MIT License.

---

## Author

**Saniya Acharya**
B.Tech CSE (2026)
Focused on backend engineering, system design, and production-grade software development.

